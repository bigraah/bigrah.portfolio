<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book - Bigrah's Portfolio</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        .book-container {
            background: white;
            padding: clamp(15px, 4vw, 40px);
            border-radius: 5px;
            box-shadow: 
                0 1px 1px rgba(0,0,0,0.15),
                0 10px 0 -5px #eee,
                0 10px 1px -4px rgba(0,0,0,0.15),
                0 20px 0 -10px #eee,
                0 20px 1px -9px rgba(0,0,0,0.15);
            width: min(95vw, 1000px);
            margin: 2rem auto;
        }

        #pdf-viewer {
            width: 100%;
            min-height: clamp(600px, 90vh, 1200px);
            background: #f8f9fa;
            border-radius: 4px;
            overflow-y: auto; /* Allow scrolling */
            position: relative;
        }

        #pdf-canvas {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            width: auto !important; /* Override PDF.js inline styles */
            height: auto !important; /* Override PDF.js inline styles */
        }

        .viewer-controls {
            position: sticky;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            gap: 1rem;
            z-index: 10;
        }

        @media (max-width: 640px) {
            .book-container {
                margin: 1rem auto;
                padding: 15px;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-gray-50 to-white min-h-screen">
    <!-- Navbar -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-xl font-bold text-gray-800">BPP</a>
                <a href="index.html" class="text-gray-600 hover:text-blue-600 transition">‚Üê Back to Home</a>
            </div>
        </div>
    </nav>

    <!-- Modern PDF Viewer -->
    <div class="book-container">
        <div id="pdf-viewer">
            <canvas id="pdf-canvas"></canvas>
            <div class="viewer-controls">
                <button onclick="prevPage()" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition">Previous</button>
                <span id="page-num" class="self-center"></span>
                <button onclick="nextPage()" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition">Next</button>
            </div>
        </div>
    </div>

    <main class="max-w-5xl mx-auto px-4 py-8 md:py-12">
        <!-- Long Form Content Section -->
        <div class="bg-white rounded-xl shadow-sm p-4 md:p-8">
            <h1 class="text-3xl md:text-4xl font-bold mb-6 md:mb-8">Long Form Content</h1>
            <div class="flex flex-wrap gap-2 mb-6">
                <span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm">API Documentation</span>
                <span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm">Technical Guides</span>
                <span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm">User Manuals</span>
                <span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm">Tech Blogs</span>
                <span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm">Industry Analysis</span>
                <span class="px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm">Case Studies</span>
            </div>
            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                <p class="text-gray-700">
                    [Your detailed explanation about long form content work will go here]
                </p>
            </div>
        </div>
    </main>

    <script>
        let pdfDoc = null,
            pageNum = 1,
            pageRendering = false,
            pageNumPending = null,
            scale = 1.5;

        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        function renderPage(num) {
            pageRendering = true;
            pdfDoc.getPage(num).then(function(page) {
                const viewport = page.getViewport({scale: scale});
                const canvas = document.getElementById('pdf-canvas');
                const ctx = canvas.getContext('2d');

                // Set canvas dimensions to match viewport
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                // Render PDF page
                const renderContext = {
                    canvasContext: ctx,
                    viewport: viewport
                };

                const renderTask = page.render(renderContext);

                renderTask.promise.then(function() {
                    pageRendering = false;
                    if (pageNumPending !== null) {
                        renderPage(pageNumPending);
                        pageNumPending = null;
                    }
                });
            });

            document.getElementById('page-num').textContent = `Page ${num} of ${pdfDoc.numPages}`;
        }

        function queueRenderPage(num) {
            if (pageRendering) {
                pageNumPending = num;
            } else {
                renderPage(num);
            }
        }

        function prevPage() {
            if (pageNum <= 1) return;
            pageNum--;
            queueRenderPage(pageNum);
        }

        function nextPage() {
            if (pageNum >= pdfDoc.numPages) return;
            pageNum++;
            queueRenderPage(pageNum);
        }

        // Scale canvas size based on container width
        function adjustScale() {
            const container = document.getElementById('pdf-viewer');
            const containerWidth = container.clientWidth - 40; // Account for padding
            scale = containerWidth / 1000; // Adjust base width as needed
            if (pdfDoc) {
                renderPage(pageNum);
            }
        }

        // Initialize PDF
        pdfjsLib.getDocument('Book.pdf').promise.then(function(pdfDoc_) {
            pdfDoc = pdfDoc_;
            adjustScale(); // Set initial scale
            window.addEventListener('resize', adjustScale); // Adjust on window resize
        });

        // Add touch swipe support
        let touchstartX = 0;
        const viewer = document.getElementById('pdf-viewer');
        
        viewer.addEventListener('touchstart', e => {
            touchstartX = e.changedTouches[0].screenX;
        });

        viewer.addEventListener('touchend', e => {
            const touchendX = e.changedTouches[0].screenX;
            const diff = touchstartX - touchendX;

            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    nextPage();
                } else {
                    prevPage();
                }
            }
        });
    </script>
</body>
</html>
